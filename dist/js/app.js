$(document).ready(function(){function e(){i(),t(),a(),s(),o(),r(),l(),d(),m.on("resize",debounce(u,200))}function i(){svg4everybody(),window.viewportUnitsBuggyfill.init({force:!0,refreshDebounceWait:150,appendToBody:!0})}function a(){m.on("scroll",throttle(function(e){var i=m.scrollTop(),a=$(".header").not(".header--static"),n=a.height(),t=h.find(".page__content div:first-child()").height()-n;Math.round(h.height()/m.height())>2.5&&(i>0?a.addClass("is-fixed"):a.removeClass("is-fixed"),i>t?a.addClass("is-fixed-visible"):a.removeClass("is-fixed-visible"))},10))}function n(){$("[js-hamburger]").removeClass("is-active"),$(".mobile-navi").removeClass("is-active")}function t(){$(".header__menu li").each(function(e,i){$(i).find("a").attr("href")==window.location.pathname.split("/").pop()?$(i).addClass("is-active"):$(i).removeClass("is-active")})}function o(){$("[js-slider]").each(function(e,i){var a=$(i);a&&void 0!==a&&a.slick({autoplay:void 0!==a.data("slick-autoplay"),dots:void 0!==a.data("slick-dots"),arrows:void 0!==a.data("slick-arrows"),prevArrow:'<div class="slick-prev"><svg class="ico ico-back-arrow"><use xlink:href="img/sprite.svg#ico-back-arrow"></use></svg></div>',nextArrow:'<div class="slick-next"><svg class="ico ico-next-arrow"><use xlink:href="img/sprite.svg#ico-next-arrow"></use></svg></div>',infinite:(a.data("slick-infinite"),!0),speed:300,slidesToShow:1,accessibility:!1,adaptiveHeight:!0,draggable:void 0===a.data("slick-no-controls"),swipe:void 0===a.data("slick-no-controls"),swipeToSlide:void 0===a.data("slick-no-controls"),touchMove:void 0===a.data("slick-no-controls")})}),$(".js-clientSlider").not(".slick-initialized").slick({dots:!0,pauseOnDotsHover:!0,prevArrow:!1,nextArrow:!1,speed:550,infinite:!0,slidesToShow:8,slidesToScroll:8,responsive:[{breakpoint:1440,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:576,settings:{slidesToShow:2,slidesToScroll:2}}],customPaging:function(){return"<div></div>"}});var e=new Swiper(".js-sliderExample",{direction:"vertical",slidesPerView:1,spaceBetween:30,mousewheel:!0,loop:!0,pagination:{el:".swiper-pagination",clickable:!0}}),i=new Swiper(".js-sliderReviews",{direction:"vertical",slidesPerView:1,spaceBetween:30,mousewheel:!1,pagination:{el:".swiper-pagination",clickable:!0}}),a=document.querySelector("[js-reviewCurrent]");document.querySelector("[js-reviewMain]").innerHTML=i.slides.length,i.on("slideChange",function(){a.innerHTML=i.activeIndex+1});var n=document.querySelector("[js-exampleCurrent]");document.querySelector("[js-exampleMain]").innerHTML=e.slides.length-2,e.on("slideChange",function(){n.innerHTML=e.realIndex+1})}function s(){var e=0;$("[js-popup]").magnificPopup({type:"inline",fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"show",callbacks:{beforeOpen:function(){e=m.scrollTop()},close:function(){m.scrollTop(e)}}}),$("[js-popup-gallery]").magnificPopup({delegate:"a",type:"image",tLoading:"Загрузка #%curr%...",mainClass:"popup-buble",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.'}})}function l(){$("[js-dateMask]").mask("99.99.99",{placeholder:"ДД.ММ.ГГ"}),$("input[type='tel']").mask("+7 (000) 000-0000",{placeholder:"+7 (___) ___-____"})}function r(){$(".wow").each(function(e,i){var a,n=scrollMonitor.create($(i));a=$(window).width()<768?0:$(i).data("animation-delay");var t=$(i).data("animation-class")||"wowFadeUp",o=$(i).data("animation-name")||"wowFade";n.enterViewport(throttle(function(){$(i).addClass(t),$(i).css({"animation-name":o,"animation-delay":a,visibility:"visible"})},100,{leading:!0}))})}function d(){h.find("[js-lazy]").Lazy({threshold:500,enableThrottle:!0,throttle:100,scrollDirection:"vertical",effect:"fadeIn",effectTime:350,onError:function(e){console.log("error loading "+e.data("src"))},beforeLoad:function(e){}})}function c(){$(window).scroll(),$(window).resize()}function u(){var e=window.location.host.toLowerCase(),i=e.indexOf("localhost")>=0||e.indexOf("surge")>=0;if(i){console.log(i);var a="<div class='dev-bp-debug'>"+m.width()+"</div>";$(".page").append(a),setTimeout(function(){$(".dev-bp-debug").fadeOut()},1e3),setTimeout(function(){$(".dev-bp-debug").remove()},1500)}}var m=$(window),h=$(document),f={mobileS:375,mobile:568,tablet:768,desktop:992,wide:1336,hd:1680},p=[.02,.01,.47,1];e();var v=document.getElementById("scene-basketball"),g=document.getElementById("scene-volleyball"),w=document.getElementById("scene-rugby"),b=document.getElementById("scene-football"),y=document.getElementById("scene-hockey");new Parallax(v),new Parallax(g),new Parallax(w),new Parallax(b),new Parallax(y),m.on("load",function(){}),h.on("click",'[href="#"]',function(e){e.preventDefault()}).on("click",'a[href^="#section"]',function(){var e=$(this).attr("href");return $("body, html").animate({scrollTop:$(e).offset().top},1e3),!1}),$(".menu").on("click","a",function(e){e.preventDefault();var i,a=$(this).attr("href"),n=$(".header").outerHeight();i=$(window).width()>=f.tablet?$(a).offset().top-n:$(a).offset().top,$("body, html").animate({scrollTop:i},1e3)}),h.on("click",".logo__img",function(e){$("body, html").animate({scrollTop:0},1e3)}),h.on("click","[js-hamburger]",function(){$(".menu__mobile").addClass("is-active"),$(".menu__mobile .menu, .menu__mobile .menu__mobile-close").addClass("slideInLeft")}),h.on("click","[js-menuClose]",function(){$(".menu__mobile").removeClass("is-active"),$(".menu__mobile .menu, .menu__mobile .menu__mobile-close").removeClass("slideInLeft")}),h.on("click","[js-bannerBtn]",function(e){var i=$(e.target),a=$(e.target).attr("data-banner"),n=$(".banner__img");$("[js-bannerBtn]").removeClass("is-active"),n.hasClass("is-active")&&n.removeClass("is-active fadeIn"),i.addClass("is-active"),$("[data-img='"+a+"']").addClass("is-active fadeIn")}),h.one("focus.autoExpand",".ui-group textarea",function(){var e=this.value;this.value="",this.baseScrollHeight=this.scrollHeight,this.value=e}).on("input.autoExpand",".ui-group textarea",function(){var e,i=0|this.getAttribute("data-min-rows");this.rows=i,e=Math.ceil((this.scrollHeight-this.baseScrollHeight)/17),this.rows=i+e}),$('[data-toggle="tooltip"]').tooltip(),Barba.Pjax.Dom.containerClass="page";var C=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.fadeIn.bind(this))},fadeOut:function(){var e=Barba.Utils.deferred();return anime({targets:this.oldContainer,opacity:.5,easing:p,duration:300,complete:function(i){e.resolve()}}),e.promise},fadeIn:function(){var e=this,i=$(this.newContainer);$(this.oldContainer).hide(),i.css({visibility:"visible",opacity:.5}),anime({targets:"html, body",scrollTop:0,easing:p,duration:150}),anime({targets:this.newContainer,opacity:1,easing:p,duration:300,complete:function(i){c(),e.done()}})}});Barba.Pjax.getTransition=function(){return C},Barba.Prefetch.init(),Barba.Pjax.start(),Barba.Dispatcher.on("newPageReady",function(i,a,t,o){e(),n()})}),$(document).ready(function(){var e={required:!0,normalizer:function(e){return e&&"+X (XXX) XXX-XXXX"!==e?e.replace(/[^\d]/g,""):e},minlength:11,digits:!0};$("[js-modal]").validate({errorPlacement:function(e,i){e.addClass("ui-input__validation"),e.appendTo(i.parent("div"))},highlight:function(e){$(e).parent("div").addClass("has-error")},unhighlight:function(e){$(e).parent("div").removeClass("has-error")},submitHandler:function(e){$(e).addClass("loading"),$.ajax({type:"POST",url:$(e).attr("action"),data:$(e).serialize(),success:function(i){$(e).removeClass("loading");var a=$.parseJSON(i);"success"==a.status||$(e).find("[data-error]").html(a.message).show()}})},rules:{name:"required",email:{required:!0,email:!0},phone:e},messages:{name:"Заполните это поле",email:{required:"Заполните это поле",email:"Email содержит неправильный формат"},phone:{required:"Заполните это поле",minlength:"Введите не менее 11 символов",phone:"Введите корректный телефон"}}})});